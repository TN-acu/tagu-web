<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>taguアプリ</title>
    
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <link rel="icon" href="favicon.ico">
    <link rel="icon" type="image/png" sizes="192x192" href="android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="android-chrome-512x512.png">
    <link rel="manifest" href="manifest.json">
    <script type="text/javascript" src="https://gc.kis.v2.scr.kaspersky-labs.com/FD126C42-EBFA-4E12-B309-BB3FDD723AC1/main.js?attr=mnKqLr2dCq0wSdTz1wjICPV1AdDWKVYToL9U5BwT-XCimgMO5_pq2-jfLk87lEaZot5hE-wbGPPd9ZSq8aul-n5n80ZWIfVaU6ck_grGyG58y-QWb16ThZaPwnM_dxU0YRBnmk0-WOwVNAJzL_Ati65dEIfimfHJfoLUsEbma7D2VITiXPVMmnisjeIoK40b-DnhH8Wh28ELvio6p4C5iltOHXCXeNx3Vgr3rSD16A7Kd4Zu0pBOlsX_rzXUspEcrJSgZhTdAPpBA1wq3pcyxkBOuJfc442LbfOXa91k_glorNctlbccgBr4sruT1c9iMLdRvbfEY3jC_ypOOkYoMTLAskZwvctUJOLklwmxhflk7PZ_6C2TyAH_jPsHeqJ9Egb49EG4skTMnrL0e55mWEC27knvDwQBkbHKefzf-Z_k6-YxKct0zAkcir8i94Qs2P9TqVoQvthK0_As2GJ2k17oYjrX-HOOTIRPxhL_NXw_SsAUe5c5DyzXfo07sT3q8mM3L5XK1Neygfs4YnYxKPiNbpmjmiMMVlA-PsSp_giGQvFSRk9Kt95e2-A1aLxhszFgPeHhvbPyS8Gww7-MBStWSkXgHPcP1jrhOIg7nfIexTkYJ8s5CXJHsIYSb8B8I_fIRdbUk8FTYIXAS7KOH9HXhv991zg-LodGqL9ARbiiY7qfR-Ilk0A7tOR6OZpP2kKxcj4ztPXegrBVaSW3Vlm8D58JH0u1dZBM7Ud1tJcnNQJBYuXKjsRAFLqAyyxPuFd__218J9f3YifLKeWEDr0-3_9HDQW9yyDHmTpnntAnqhqmngH4NqmzVdAO9XYpQ_PE6qRGlRm6htTT3Ohpo__D4aU6zXUOuCpQ46IRTEzNTmmjeneu-X2gGzLr_o1ZgTZdDXUGWm_w6btJmWjPPq63wR8dhJk98w4G0zvAohLzHjs5jPUzSZ5xYkqOYFnWH-j03KqOh3NlcVnB3MR_tdRuG4nZV0SHlMLISaxR9gUg4fUMajfMkNYKjGIViCZXOv0fpAdbjg35IKv4mA_hS8T6zLh8vO_h2ctH4ZqQvHlFxDx4ZvQjDnjJG2Gm1Qb9WnYNKOsMgDKe0X8zQj3jzpXaRtGTaVtD6IWJ814soFXEm7JZZ-s5t6O9Omx_y9pJKs_8OnDjpFYMz-Cpqkdsv8dNZbgfwGQV8whRxKElq6j7wqpB3StvIfnk2XbO_sgTLVXOnW-56K5wjuQbwtDPVKdcUgPcJzhu_nHY6pOCmz7zqMFmRoAGqrJvGxVXBVntTJq4i2prQBDlj6VcnO587lt8_H94JEGYdkmRhJb_9l33xL1XVaowpzoK3G0bDzYEsYwJHRbe4-uF4jwSKMkx7_4bSI9JNryeiyUveQIKYuxKYyBR5obUfYDWWjI1Zoo0fFUdPzWEbGBMaOx99ubLxD56ILSIs7GlxxDRtCgDUdxPgmCpezf4zqj_jzM_qMgXqJI_WM0q-Aqh5HXPxSesVSTo4A33b7FExJTj_2GKvTT2tNhmKsnuFfHPDBoloHUBx20e60tuyuIx6GsY_XqPKBwZq3JBONZ9NwBy02RJOfrQiUKj1hhO5K6_51JzT9ilgsX7S3EnFcK4OK6IDoeFgnejwvCh_r4EUYXKVCe7XiqJNhtpxQFrSYsDQE2rfcaD9yQtMeFv7uu8LRnvHWDbX4mBraf0Ek-YYZeLIVO9yATCogRU984mcIZBn-cjBaK57cdY201djmvm4U00_1tovOfzk2ra1bOBRUOv9LdRa8hHdxC5ulmCdk3he06sBO6s2kCUpIIafy4ppDaLDjo1JWjQbca9odxkXlX0kfpckI6zm0g0jKmTFMZ-9F3BTd-uoj0bMcAhuiOHenq0xC132MBD4QRcvrZQOMCCeVjG33TiWMo4FWG2Gz_YWSc0ZRAuaqUbShbMxF4RG_1e1DeovGc14pHJxlZQq8W1KVgN4nrmQeji5aX3giDUHKiRTjU4hOqYPrjD4qdXfIErhjHW_moPhZs2OrXvDRIKXzWaxGSg0GEHcpL8FAe1ZcbgNpX8khgNRUb6u0241l_QZn_GMVFS9VJl5vEPKJx_9gaxL4JCbhL36xYr3BbiRg4zBniKwwnmD1WaM6nGEg0VOatchd5YTSNX4t_izF8G_AZtsMEEzdXUx_AegIRYDRH82SL57SPOOubdzb7cz-BNSiu-ZIqMiJb9o9o3CfkLyzYl6xLAKhRxK2hS0ELYNig0AgaUMzFVfeFaMWuF0RT5S8qsp9HVxShPkkIFxuNCuPWys1SM2gStesZjY-1o69dNFQmxWJdZFfSJCoNWy1ly1yrxq0YXiaJGx6gv40eKyMuziL2hvZXQ97nGAct4SKzk9EgW0oIAweHPBWj0TJB92BihvnJxsNymYsPfWwHek-1idLa-5SWLaFjhnJvrjj1Lly8SS57FbMUUen3hH2ssbuQaWRaJ_Uj1Ly0_YEjeHLYo3mkkZFYV4OaEmgBwwo3d138ehdF9X-N6kAt6_zaSK50BqizgtsZy0JiXhZO-Z6wUSmy7ztN5pdvZ3HZmO_wyqAOGAKdNHaxF5bpdvg-14OmxRKly8x3ddLR7KIMWsppKVz736S5lQ1nG_9-3hDIWPHrh5qmNCdzlGBYqlsq5wxspQEN73Jkg0JT3_jeD77cEAehOuBJ2eh0ugi_miKvo3aa_mBl1FB9gxMPSKnuYjeVHbsUpPEg6xOdcyLK86-f-igKpK1lkCBOGx88bA2RHYACqhyRlndIsH9pxwnVr6h595dvqd-x12S13G-eSYDUNKe6PIxzBxxWTaAejhTHyIWaVb8c_v39D_0d0WC7LVd1Srt0Rz84tDSlLtR6il5LYvr7y4Tf74ad4wvwSiANc11rdJPLgOYpn5VZhU7VJQEKnZ-etp4LZcBT2gudS7vcZ751UnaB0A9m2MSVOIPquaOF--C9qPPiRbP_nDQzqokdYogVG3xOJOfxD-DfufrFFpYgazxrVNss_X_oeuIVQjZHcYd56pTfyPqBePVnVeY1OiuKnShfQd0XLIpez53vi4UiwtpcQDwmxZlXyEaOLv7qSzapUFFIxiMySyhpm8CkVhS_LVt_m_3E6wZcV9IyclgafBnkU-AIBOHs2djbSNxaiBrOxSxjDI3hPPdvVQsmB0HA-fElIWOYgPTPFWbwADl7dBeWm52z429rAToSZdLWxaq0V0PRMp4ritymgm4gtw5oAYwFNTeuD8PiVnOMQnAHlfSV1fWB_kDdrutz1heg_zexLzWXf78EsOPuwM6VX6v7mUIxk1k-ZbHj3ZDNxNCXxiIvTJgkq7n7xWGJ2Xu-3DQ4Jb8p1KH3XULQTZ-NHuWpUnqR_CpZbGLnY8htwi1SwVeClU0Dn6-cXakmJScLL7GQC9IIWNm2tx23B9TAnNwUFlyy3DZNV5AD2vCra5nFzvV9lwBWtp9hu9ZyIVhM2_SePLUkMfdbeFVwMDkCu0lw4sNz2ezFGwJx6GNXt-OW11LOnGIAgaHttjM2zh9t2wAluAOvMiTFnHa_tQs-zFYOiK8nIMXTeu3C_sYTcjrMpshilgTSqmshfhFMm0xdJNwclbevmyCJL8I1WnsMpQnSHcxL1Faxwn9XdcOpB4RwCU8KNWIJ9cGWlTrhOniIspAgqEZSF7Cu2rWfI7w5BqLDwHJCKVLlQFnDGC6bdPUOn-gMI7ki0NVAbAFi1rA34vAyQLJETYJ-DE-XbW9Nt8BtDhXP5HfcQ0U2AHgSOhgMXAycRgbSI3NLXhlBNHzCnHQFp3J7hRmqsBid4GddFwcSnsCfNngHxBoU5x6gvsdPVs3T7jSGg0Fzi9Zf4Z0IvKWQaPwkBtR_HDAD9oCWJjPwpV_kyA6uW7VBgTxzNHbXu0ueOZpIon7hkkcLJOuWQ8STNBnXoO5J_OFATRscvyPvqBw9v_F2tczfS01t4h3y9fTzFF20-0tu4fEkjJBqXilmJnU6nNgQmTGMphoaqvdR1XychQ8HhsxU5gKJN67QH85rMWNAQ7dRuHUKt3qtjEMvgkxoTHkor1XXFXIhULfvu_QbcTm_8ZQuFcE67z_EvAYbC3BKEfIyb5kWD3gg6HypzcZ7DChidQuhryl41MdYM8VHQoO2MSka0lbvh4FmUjFOnv_D0Jk4utmrpdLd8_arid3JVFeXYKr_0wnORgDt0gNZBBprhxV8wMhyebrWH8FOt6kuk_iNVfg4eG6kZhQ5cNRjCOYbtoa8CVFAAP1tnut--fAsu-da3luNgymH3l7C4bYdJHPLaJrfiqDdIpk2lLTXNW6rJsg9UXqXh91yVJMLnhxtKnAaa2yTa6pkpS0QxNiomg2_YR3u5VzkAm0G0McPE478gz35k7FKs6uyTpH39VAVhw6ucTi1201X5cHwd8Dmqr1B9z-8PNJI022LgH2Y63_8ptou30nUL3UOhcajZ2R1yUOBfFzKo8_4pickhVN6MppRjW9GTtsmN70UWOMZlj8ieUGnaA04GIj90cFbhzgMIC8IKgLNV0tKqqatM82umk6s6qxttjOlZM40YIm-dzzEnJOlTviRlSP-TjG_PdFqHze0FIhv4MhsJT41VoxzpBfyGe-CCDghmzJJppvY1FOZByMSb7lKgXoIuV7SNQCVjsM--7CX-tUt2YwTw41r2oJ8VQ2aPciqEBRPshX_SOuK5CdxtckeiuFqzuMJtV52QA4EZQbBL0fbf0YdFRKuGXTbHnGJRwIAivXQhyt_ixfllNlQrqDPGl_NL89l6vGuNlm3tnPoE2rv7-a1Uo4i3yU6vKUKyOSe4PbaTx7ag276p1_p0cOv8po66rNePi6HCuPVPO8GrqHPMbDvyd1rYwL-KHl5r7CLYIWf49MFra_d_nHxzPXoATBFLrC1PjWsZx6yMFE--2BrYcIp2BXXThEjws-DrP3K_3pqnxrCa8_NQkGbBv8amdlFBwicvKYFNr4kEMpOkq_G4RjZex_4l7PBeDXsK7DvfGClKY1WqgtvswdZFzXfh70rbjep7g1zGFz-kfezILY6l8m3k2TwH_v-JILdd1DsGdSiB5CRxdh70AhV08NJeNaytN1tPSV8bb7Z2IS7ecVyQ0vwIPrMYDdOJ_dU1g30jV7WzcYYDvpmCoDuWpabjWIKSe3eTF9Rh4rYJCeRWjo5YFlwhNC8NpMV1kUrbE_VCqNWNO5r5kCF47d_EKTDCwknS_qQClZ0n729SY3Fa0wf-MV3KeIze8BOnfXL1jPbJX0oUp6S61S7GSf_5cSFDIRzV0-sDxl9TlbK32QBv7Mmo4BjuczHzA3kJYCvA6XYussV-bFDcTd9XHuyHosNAqb6qkuUcAsJm0GD7SiyNgvP2jDdB2rosGjr3LCQxCACOsRIj356WtGBgwGTZVyamL3paeDc_GaJIpjtHMekylrue8qlUaCmf7HyU14RArHcpC8TPPzFv--QtcZNJ3ZzEo-ppMkb3aHr1Trnk-NC0DPXc0juaZt2loWHxj-T6k7yQbtpUb1CCLa2bT0tnUOtTofOMvOZydSkHcUy5Y2Id16vHwh2HA4T-cLGyCAGM46DLtbtTjuW_cf5WWlsBU5cgADSlnY4vtEYdZkyx37t4INR_14Ixv7IS260n-oHk2FyWTtc0ARApCZhEUbhqKS-3cMCUYx428nMWPGND1nuv8T4yaYROmhebXRLlqiwUw-P9SvTtMnyYQIdM3AeVucOnMwMjoyKH5AJA5tSqidZ3pI0NnqzU43QG7qN0wlMTbSlTAoUJqmC5fi2kUZk0poXiBfWByHha_Jtc1TP5H4-PGN4DNA8JrnUl1j84SySda4L55c5gkzMP96YUYLnEmqZGIW26k0ly6XPpTKK9ZdIpMDPM3CtHd_yWHjQmRdRkaSP8UhssHJsjdN0dxdAcUeAm2N-JzJiuIkM_PJHV4_dYC34rPhAGI3UEdh4vUvuKiRobu4AxUpaDR5VhOJjo97P_wXsPHeFPHV17F_donO48K8IZbE507VbKjPp_wKSJIIk9Mo-aDKqzaDsc9ue407KDh-vT2l0Htt1rMHJ4DU3W30rIF2QwFyO-qkL59jWPPnxiEatwVkCQEusrHgXlsUOVuXITu6XQOf8Ahx1eAR5MwH-v3dUbMx6QIRNSHZICiqJE7YTTvrE-_qDHYoet9kOmeGkJg9ye8yoL1ept9ch_LJBMBlOaP6GqApmn8VnnAdDSlQyNzu3dNhTWivx1kWWG_dmzLm9Hkamwhjs4UgSXB23gt3ld4gtkYXCo9LXfZ6W0UV7TyItHwToYA4oizPEGSmyAHLjOD2BdXdnQTq62pw0rM3R-aLOX8mVyWQigJ90F-02bGEsyNFBX55xZ7kit3i6rW9NMvyGaKnzuF7OU6Qa8hP_Bklu4nHyrapk0k7lWsoW_nsr2Z6iXlLZEXdMae45jXtD-Mjd3-S-cBDI3qUjPqZJt2diM4S-wz6eqMR0nOCgtDyLv8Os_ZXy_7iUk5MlzStzFcDkNZCGOQ5V_xRjVaRaH-YNCsldqibeQUxoXRg584xMpQcAJ33z4Ei2m6q236a9M2Kopshbj32wPX2W_tVqlaEXBf1dCzG5yG1lBgwI2VfymK1hPnRgdRogDB38NhsnRjuxlSkW93i3O4US8uZuJNqkSw0WM0b1H_cPA-WdsodMkD4nSJ6wRGX0Oea2zc6RR0TTpt6G_ei7db6pKo2ecRdUivMHKShN7JOU9Ubj8ElrLgNHFbh_75neAt4QI-KnCVqNwrDec5oOo82gTJhPveDvEpkZ85Ly03-I8YPfcJeWK6xor16eUXlC9GDyjhwDvGTb2Pmk6Sp9H6Zsd06cJ-syQujjHSsMqko6rsu-Ky-yHLJ6pIdEd8zE9O7nsEBr-UbiZi5PNrKBvbDHT03S6DfiGqMsvCE7AnEY74CF-n6IQlhZ01KQ5f-9ccim_rea4H_ddfdh3mWRw88bGwJDGj0OEF9Z-7zV4Bz83HwW5Ovy72eORvSX3CNyb-3hxSslLoD7HrZb0ZqQ6Y8-wKZQ0IX0RG6svB8lOWWlVEyHnn4MueV2jzHJb7uZxTk36PDwGcGez-DXYjWAb-_NARFVujWUK990hLVS03xKZ5TBDXJx4HFwMqoLjuoMXYNMCqszQzCPSOfkrYoC2j1LXVy_84jZoyTuoPCwarQUY0LXM5R_dKZ6Nb6uOy2swa7msNrdvsFjyUFuWWS6Okq5bHcgO6dcst4pB7v2V9lWzKb7cXI6HsSV3p0DAWdPZzJFUq8kAVJBlzDVTZvwiTy8Q1dKsUXGm5YLmzFQtzNKjckKlXHHAhaQBKlU53s6mV9YkiSUQZhUpz5cNIta4IeHZZq8mwaB-auYxtUq7VfLK37_oSh4naMHI63JKoJk9INPswfMSKBUEH1qF19w4FiLLwR_2Jn0YZ1eJGuUKX_qym0lrtZQnG5OkIiBtzAk-OeOn66MGXUn_uI-ZqMPkYJMPVu7fwpxlX81MBLgr9lFoIg1a4QWbqOLZLtZqhnaK1xuPmK2mhMMh_w09hKiw--HB_ROmue5w1Mtdad51w-ty-xObThlvicCf63YJ13G-JIC1RPZ_lYUFBQq0uRSywM1eI5U8PgImNKdZq7Pjr0HPCht3lsK5COaaghxxQutmJqXtuihehZmOVLDAsWjGBO_W2etRqQE5a8ZtKZj_9Tk2p5AJqICZ5zMFYeH449xntMND8sm6i_8EgZMYSkJfLElBmP7_vkqLT7o1_RB2trwtfys_Qj8G9N7AAqVmwjkm7m7FKjrvCL5YA0qf6BMETJog23u2ogjL9Hr4o1pGWnQ4JKS7L84u9bzNUMqivVhE8Mupy-O7t8kT1yQCY6huVTISU0UV9eItCtJSPX72m15dxA8Np3S8nI7BNXdyqua_q73piA_tbhUDdfH2YBuzEU-GmoysO-170U6-VHZf3F8cKz6gtGUE14tXRv9wLtjnkfNxZNWDHCEJdgylJ-bXfAB_VVJtY1BsobmovPgAtG_oVxN6r1_vMFrzb7Xo4ugEclLVDBLYAOC4DT7wv9a4VvqvPme5apURWRySU4nbPn4V40FqnYU6oWqLDGs7oMEgjJ-i0lo82Gf-u24l-_VlLUKpEej3Nk2_gBE6LCfIRyB8inJ2EakgsgHQuRHKJ6EhVuaDZQgxybNGmMbSqljHPYT1pW2AyFzn9bDVJj94BBdxpCrQRkSVtpU-sysTvJMimVwtLp77M5fKB6R8iiGnio9s48V2IxCmwNCz7Lsv_RkUL3DrYfCp6A2KDtRgF8Y5AF71l6QGgiokZBn0oMKvCCRnPBQ7ac98_Q2w4FgKpmIDixXWOeFsoUc9Y8971sZkmxwFQnxl251NLkJ0b-qS8elSkp4GkPXDC5Szrf_UqBe5urZOR8FomXx2JDH6_Bru2CUzOoddak-zYfcGHJROdxuOdUCcgrvH5uK7ayQAVU3am-Pbmg5miNJm2x85F3Z-NjGO0pz0D2614H3_u1JnCBzBVuRfMArhWTe515bPxbSYTOUSuCm5MtcMkiewwtuYzvCzv55ROPghN3DcaLne-AR5o5-5Jy-WDCRwscOnP49F-0DPFMYCrBdiPkAHEVaz634Uu4pksfjsE6B4-5Ch_JX0ZnnGq8toJ6CEoLE5GPOUk2OStkey_gvKMEq0SJnd7KZhIiPJJfo717XKtf0PHlZ5tJd4QbNfLD0jn59_LcMITbTX-qkCifz6KNsWOge5igegY8ZyI-wNIub_DL8x8M_nRcLTa31fOPHkoBFRDpQxiILnjOFRCl33Nk3oOWRJZHIM6IXdCjW4-lGo9UKUGV7uVnYJFt13sK9tom0St--nh9vHK0D2yZ-ZVWUj0EJLUFDhqYGfMiB_QCoHofke8O9hNYcBMwlYiSc2xeMSS03R8KZI7Icaif1KYT959v1VxCtY6ajz8u0Y1oTo0jX0MADNyjmju2AfLQMz4Ti0Jdg6Ff10HNeJriats5tPwqh0kD8vb_Ftj6Rw1GBopBa8Sy85egyZa4JkUE2qrEAXnCVcI3yn-skA7B_0aGyC2JbqCX_tEuanjoNS3o7jv3l-FkRc2xzfn5HBrD-yjZlRCj-uc0s8iZ8K8fcyeg7UbwmQ5iZeiNlGRw6g9cpJgaPmEaWxIHRa4-FSSA_WDZJ46pYnx0vMrjF_i9EoWL2_bF8SzbrEoR9JRZTXf72lcKSC6NZVuf1LBfMke38B-UZH128DaF9z4j4w7slTlEJUbrqEq-jxze63JvaMPANlC4MOARQ9gjs_McB7_Uj_BjucQinCavL86zavvPtSAfHecUV0PRMeA7bbNkmY57pC6Dxu2fV2G8TKe73Bi_3osILWSIcUf2Eu-aNtbfw2A1_vgM73mMJAVM8k2fJFt0kKpXrcS4mt-rUbBQUz0uAs6htV3b5ZeaXIw7wRU3LlbC-10QD5-RiI5EH5zJdHMkSCSkMPcPbxDhRbVbCFmaoKg6NMUi_qFXcRTh5J9uB6nLqBQ0EagCjdLacn-WVO9ilHbEzvHy05R_Tq7mkbpJDOpWOKxsm75apbURzECK0PiOZKo8FFbOgbmEGmbp8_S3A0_5SLn1kr2aQJYgDhMKEAIPIPgbVUnne9EvyAWemkJWNls1sMz_fxWSoMmZcardfQ1zjaFCk" charset="UTF-8"></script><style>
        :root {
            --app-height: 100vh;
            --footer-height: 50px;
            /* Light Mode Colors */
            --bg-color-light: #f8f9fa;
            --text-color-light: #212529;
            --border-color-light: #dee2e6;
            --link-color-light: #007bff;
            --hover-bg-color-light: #e9ecef;
            --secondary-bg-light: #ffffff;
            /* Dark Mode Colors */
            --bg-color-dark: #212529;
            --text-color-dark: #f8f9fa;
            --border-color-dark: #495057;
            --link-color-dark: #f8f9fa; 
            --hover-bg-color-dark: #343a40;
            --secondary-bg-dark: #343a40;
        }
        html {
            height: 100%;
        }
        body {
            margin: 0; padding: 0; 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            overflow: hidden; 
            background-color: var(--bg-color-light);
            color: var(--text-color-light);
            transition: background-color 0.3s, color 0.3s;
            display: flex;
            flex-direction: column;
            height: var(--app-height); 
        }
        body.dark-mode {
            background-color: var(--bg-color-dark);
            color: var(--text-color-dark);
        }

        .container { 
            display: flex; 
            flex-grow: 1; 
            overflow: hidden; 
            min-height: 0; 
        }
        .nav-column {
            flex-shrink: 0; 
            width: 250px; 
            background-color: var(--bg-color-light); 
            padding: 15px;
            border-right: 2px solid var(--border-color-light); 
            overflow-y: auto;
            box-sizing: border-box;
            transition: background-color 0.3s, border-color 0.3s;
        }
        body.dark-mode .nav-column {
            background-color: var(--bg-color-dark);
            border-right-color: var(--border-color-dark);
        }

        .content-column { 
            flex-grow: 1; 
            overflow: hidden; 
            display: flex; 
            flex-direction: column; 
        }
        iframe { 
            width: 100%; 
            flex-grow: 1; 
            border: none; 
        }
        .nav-column h2 { 
            margin-top: 0; 
            font-size: 1.3em; 
        }
        .nav-column ul { 
            list-style: none; 
            padding: 0; 
            margin: 0;
            transition: all 0.3s ease-out; 
            overflow: hidden; 
        }
        .nav-column li { margin-bottom: 8px; }
        .nav-column a { 
            text-decoration: none; 
            color: var(--link-color-light); 
            font-size: 1.1em; 
            display: block; padding: 6px 10px; border-radius: 5px; 
            transition: background-color 0.2s, color 0.2s; 
        }
        body.dark-mode .nav-column a {
            color: var(--link-color-dark);
        }
        .nav-column a:hover { 
            background-color: var(--hover-bg-color-light); 
        }
        body.dark-mode .nav-column a:hover {
             background-color: var(--hover-bg-color-dark);
        }
        
        .update-info {
            font-size: 0.5em;
            color: #999;
            font-weight: normal;
            vertical-align: middle;
            margin-left: 10px;
        }

        #footer-controls {
            flex-shrink: 0; 
            height: var(--footer-height);
            background-color: var(--secondary-bg-light);
            border-top: 1px solid var(--border-color-light);
            padding: 5px 10px;
            box-sizing: border-box;
            display: flex;
            align-items: center;
            z-index: 100;
            transition: background-color 0.3s, border-color 0.3s;
        }
        body.dark-mode #footer-controls {
            background-color: var(--secondary-bg-dark);
            border-top-color: var(--border-color-dark);
        }

        .dark-mode-toggle {
            flex-shrink: 0;
            padding: 8px;
            margin-right: 10px;
            cursor: pointer;
            border-radius: 5px;
            border: 1px solid var(--border-color-light);
            background-color: var(--bg-color-light);
            color: var(--text-color-light);
            font-size: 0.9em;
        }
        body.dark-mode .dark-mode-toggle {
            border-color: var(--border-color-dark);
            color: var(--text-color-dark);
            background-color: var(--bg-color-dark);
        }

        .search-container {
            display: flex;
            width: 100%;
            flex-grow: 1; 
        }
        .search-container input[type="search"] {
            flex-grow: 1;
            padding: 8px;
            border: 1px solid var(--border-color-light);
            border-radius: 5px 0 0 5px;
            font-size: 0.9em;
            background-color: var(--secondary-bg-light);
            color: var(--text-color-light);
            min-width: 50px; 
        }
        body.dark-mode .search-container input[type="search"] {
            border-color: var(--border-color-dark);
            background-color: var(--secondary-bg-dark);
            color: var(--text-color-dark);
        }
        .search-container button {
            flex-shrink: 0;
            width: 36px;
            padding: 0;
            border: 1px solid var(--border-color-light);
            background-color: var(--bg-color-light);
            color: var(--text-color-light);
            cursor: pointer;
            font-size: 1.1em;
            line-height: 1;
        }
        .search-container button:first-of-type {
            border-left: none;
        }
         .search-container button:last-of-type {
            border-left: none;
            border-radius: 0 5px 5px 0;
        }
        body.dark-mode .search-container button {
            border-color: var(--border-color-dark);
            background-color: var(--bg-color-dark);
            color: var(--text-color-dark);
        }

        @media (max-width: 768px) {
            .container { 
                flex-direction: column; 
            }
            .nav-column { 
                width: 100%; 
                border-right: none; 
                padding: 0; 
                flex-basis: auto; 
                flex-shrink: 0; 
                overflow-y: hidden; 
                transition: height 0.3s ease-out; 
            }
            body.dark-mode .nav-column {
                background-color: var(--bg-color-dark);
            }
            .nav-column h2 { display: none; }
            .menu-toggle { display: flex; }
            #menu-toggle-open { border-bottom: 2px solid var(--border-color-light); }
            body.dark-mode #menu-toggle-open { border-bottom-color: var(--border-color-dark); }
            #menu-toggle-close { display: none; }
            .nav-column ul { height: 0; padding: 0 15px; flex-direction: column; }
            .nav-column.menu-open ul {
                height: auto; 
                display: flex; 
                padding: 10px 15px; 
                border-bottom: 2px solid var(--border-color-light); 
            }
            body.dark-mode .nav-column.menu-open ul { border-bottom-color: var(--border-color-dark); }
            .nav-column li { margin-bottom: 5px; text-align: center; }
            .nav-column a { margin: 0; font-size: 1.1em; padding: 8px 10px; }
            .content-column { flex-grow: 1; min-height: 0; }
        }
        
        .menu-toggle {
            width: 100%; padding: 10px; font-size: 1.2em; font-weight: bold;
            text-align: center; background-color: #28a745; color: white; 
            border: none; cursor: pointer; box-sizing: border-box;
            transition: all 0.3s ease-out; display: flex; align-items: center; justify-content: center;
        }
        
        body.dark-mode .menu-toggle {
            background-color: #26422d;
            color: #b8bbbf;
        }

        .menu-toggle.close-btn { border-top: 2px solid var(--border-color-light); margin-top: 10px; }
        body.dark-mode .menu-toggle.close-btn { border-top-color: var(--border-color-dark); }
        .menu-toggle .arrow {
            display: inline-block; margin-left: 8px; width: 0; height: 0;
            border-left: 6px solid transparent; border-right: 6px solid transparent;
            vertical-align: middle; transition: transform 0.3s ease-out;
        }
        .menu-toggle.open-btn .arrow { border-top: 6px solid white; }
        .menu-toggle.close-btn .arrow { border-bottom: 6px solid white; }
    </style>
</head>
<body>

    <div class="container">
        <div class="nav-column" id="nav-column">
            <h2 id="pc-menu-title">アプリ選択<span id="last-updated" class="update-info"></span></h2>
            <button class="menu-toggle open-btn" id="menu-toggle-open">
                他のアプリを選択する <span class="arrow"></span>
            </button>
            <ul id="app-list">
                <li><a href="timer-portrait.html" target="contentFrame">●実技用タイマー(縦表示)</a></li>
                <li><a href="timer-landscape.html" target="contentFrame">●実技用タイマー(横表示)</a></li>
                <li><a href="quiz-kaibougaku/quiz-kaibougaku.html" target="contentFrame">●解剖学2025前期期末クイズ(Forms全316問+過去問170問以上)</a></li>
                <li><a href="quiz-iryougairon2025zenki/quiz-iryougairon2025zenki-kimatu.html" target="contentFrame">●医療概論2025前期期末クイズ(過去問55問+国試問題13問)</a></li>
                <li><a href="quiz-iryoutoshakai2025zenki/quiz-iryoutoshakai2025zenki-kimatu.html" target="contentFrame">●医療と社会2025前期期末クイズ(予想27問+過去問21問)</a></li>
                <li><a href="quiz-sizenkagaku2025zenki/quiz-sizenkagaku2025zenki-kimatu.html" target="contentFrame">●自然科学2025前期期末クイズ(過去問40問)</a></li>
                <li><a href="quiz-seirigaku2025zenki-kimatu/quiz-seirigaku2025zenki-kimatu.html" target="contentFrame">●生理学2025前期期末クイズ(生理学復習問題①PDFから38問(38～72、74、76～77)+過去問74問 ※不適切問題1問以外)</a></li>
                <li><a href="quiz-touyouigakugairon2025zenki-kimatu/quiz-touyouigakugairon2025zenki-kimatu.html" target="contentFrame">●東洋医学概論2025前期期末クイズ(Forms試験範囲復習60問＋Forms練習問題70問)</a></li>
                <li> 
                    <button class="menu-toggle close-btn" id="menu-toggle-close">
                        他のアプリ選択メニューを閉じる <span class="arrow"></span>
                    </button>
                </li>
            </ul>
        </div>
        <div class="content-column">
            <iframe src="timer-portrait.html" name="contentFrame" id="contentFrame" title="コンテンツ表示エリア">
                お使いのブラウザはiframeに対応していません。
            </iframe>
        </div>
    </div>

    <div id="footer-controls">
        <button id="dark-mode-toggle" class="dark-mode-toggle" title="ダークモード切替">🌙</button>
        <div class="search-container">
            <input type="search" id="search-input" placeholder="表示画面内を検索...">
            <button id="search-prev" title="前を検索">△</button>
            <button id="search-next" title="次を検索">▽</button>
        </div>
    </div>

    <script>
        const iframe = document.getElementById('contentFrame');
        const bodyElement = document.body;

        const setAppHeight = () => {
            document.documentElement.style.setProperty('--app-height', `${window.innerHeight}px`);
        };
        window.addEventListener('resize', setAppHeight);
        window.addEventListener('orientationchange', setAppHeight);
        setAppHeight();

        const displayLastUpdated = () => {
            const lastModified = new Date(document.lastModified);
            const year = lastModified.getFullYear();
            const month = String(lastModified.getMonth() + 1).padStart(2, '0');
            const day = String(lastModified.getDate()).padStart(2, '0');
            const hours = String(lastModified.getHours()).padStart(2, '0');
            const minutes = String(lastModified.getMinutes()).padStart(2, '0');
            const seconds = String(lastModified.getSeconds()).padStart(2, '0');
            const formattedDate = `${year}${month}${day} ${hours}:${minutes}:${seconds}`;
            const updateElement = document.getElementById('last-updated');
            if (updateElement) {
                updateElement.innerHTML = `last update ${formattedDate}`;
            }
        };
        displayLastUpdated();

        const menuToggleOpenBtn = document.getElementById('menu-toggle-open');
        const menuToggleCloseBtn = document.getElementById('menu-toggle-close');
        const navColumn = document.getElementById('nav-column');
        const appList = document.getElementById('app-list');
        const pcMenuTitle = document.getElementById('pc-menu-title');

        const setupMobileMenuLayout = () => {
            if (window.innerWidth <= 768) {
                pcMenuTitle.style.display = 'none';
                menuToggleOpenBtn.style.display = 'flex';
                menuToggleCloseBtn.style.display = 'none';
                navColumn.classList.remove('menu-open'); 
                appList.style.height = '0';
                appList.style.paddingTop = '0';
                appList.style.paddingBottom = '0';
            } else {
                pcMenuTitle.style.display = 'block';
                menuToggleOpenBtn.style.display = 'none';
                menuToggleCloseBtn.style.display = 'none';
                navColumn.classList.remove('menu-open');
                appList.style.height = 'auto'; 
            }
        };

        const toggleMenu = () => {
            if (window.innerWidth > 768) return;
            navColumn.classList.toggle('menu-open');
            const isOpen = navColumn.classList.contains('menu-open');
            if (isOpen) {
                menuToggleOpenBtn.style.display = 'none';
                menuToggleCloseBtn.style.display = 'flex';
                appList.style.height = 'auto';
                const scrollHeight = appList.scrollHeight;
                appList.style.height = '0';
                setTimeout(() => { appList.style.height = `${scrollHeight}px`; appList.style.paddingTop = '10px'; appList.style.paddingBottom = '10px'; }, 10);
            } else {
                menuToggleOpenBtn.style.display = 'flex';
                menuToggleCloseBtn.style.display = 'none';
                appList.style.height = `${appList.scrollHeight}px`;
                setTimeout(() => { appList.style.height = '0'; appList.style.paddingTop = '0'; appList.style.paddingBottom = '0'; }, 10);
            }
            setTimeout(setAppHeight, 300); 
        };

        menuToggleOpenBtn.addEventListener('click', toggleMenu);
        menuToggleCloseBtn.addEventListener('click', toggleMenu);
        const appLinks = document.querySelectorAll('#app-list a');
        appLinks.forEach(link => {
            link.addEventListener('click', () => { if (navColumn.classList.contains('menu-open')) { toggleMenu(); } });
        });
        window.addEventListener('resize', setupMobileMenuLayout);
        setupMobileMenuLayout(); 

        const darkModeButton = document.getElementById('dark-mode-toggle');
        
        function injectBaseStyles(iframeDoc) {
            const styleId = 'injected-base-style';
            if (iframeDoc.getElementById(styleId)) return;

            const styleElement = iframeDoc.createElement('style');
            styleElement.id = styleId;
            styleElement.textContent = `
                .search-button-wrapper {
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }
                .search-btn {
                    flex-shrink: 0;
                    width: 38px;
                    height: 38px;
                    font-size: 1.2em;
                    padding: 0;
                    border-radius: 50%;
                    border: 1px solid #ccc;
                    background-color: #f0f0f0;
                    color: #333;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }
                .search-btn:hover {
                    background-color: #e0e0e0;
                }
            `;
            iframeDoc.head.appendChild(styleElement);
        }

        const applyDarkModeToIframe = (enable) => {
            try {
                const iframeDoc = iframe.contentDocument;
                if (!iframeDoc) return; 
                const styleElementId = 'injected-dark-mode-style';
                let styleElement = iframeDoc.getElementById(styleElementId);
                if (enable) {
                    if (!styleElement) {
                        styleElement = iframeDoc.createElement('style');
                        styleElement.id = styleElementId;
                        iframeDoc.head.appendChild(styleElement);
                    }
                    styleElement.textContent = `
                        body { background-color: #212529 !important; color: #f8f9fa !important; }
                        .quiz-container h1 { color: #f8f9fa !important; }
                        .main-container h1, .main-container h2 { color: #000000 !important; }
                        #quiz-header { background-color: #474a4d !important; }
                        #score-text { color: #b8bbbf !important; }
                        ::selection { background-color: #ffc107 !important; color: #000000 !important; }
                        .quiz-container, .timer-container, div[style*="background"], section, main {
                            background-color: transparent !important; color: inherit !important;
                        }
                        button, input, select {
                            background-color: #343a40 !important; color: #f8f9fa !important; border-color: #495057 !important;
                        }
                        .search-btn { background-color: #343a40 !important; color: #f8f9fa !important; border-color: #495057 !important; }
                        a { color: #66bfff !important; }
                        .choice-btn.selected {
                            background-color: #5a6268 !important; 
                            border-color: #adb5bd !important;     
                            color: #ffffff !important;           
                        }
                    `;
                } else {
                    if (styleElement) { styleElement.remove(); }
                }
            } catch (e) {
                console.warn("Could not access iframe content for dark mode: ", e.message);
            }
        };

        darkModeButton.addEventListener('click', () => {
            bodyElement.classList.toggle('dark-mode');
            const isDarkModeEnabled = bodyElement.classList.contains('dark-mode');
            darkModeButton.textContent = isDarkModeEnabled ? '☀️' : '🌙';
            applyDarkModeToIframe(isDarkModeEnabled);
        });

        const searchInput = document.getElementById('search-input');
        const searchPrevBtn = document.getElementById('search-prev');
        const searchNextBtn = document.getElementById('search-next');

        const performSearch = (direction) => {
            const searchTerm = searchInput.value;
            try {
                const iframeWin = iframe.contentWindow;
                if (iframeWin && typeof iframeWin.handleSearch === 'function') {
                    iframeWin.handleSearch(searchTerm, direction);
                } else if (searchTerm) {
                    alert("現在のページではカスタム検索機能がサポートされていません。");
                }
            } catch (e) {
                console.error("Error calling iframe search function:", e.message);
            }
        };

        searchNextBtn.addEventListener('click', () => performSearch('next'));
        searchPrevBtn.addEventListener('click', () => performSearch('prev'));
        searchInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                performSearch('next');
            }
        });
        
        function isMobile() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }

        function addSearchButtonsToIframe() {
            try {
                const iframeDoc = iframe.contentDocument;
                if (!iframeDoc || !iframeDoc.body || iframeDoc.body.classList.contains('search-buttons-added')) return;

                const createSearchButton = (targetElement) => {
                    let textToSearch = "";
                    const originalTextContent = targetElement.textContent;

                    if (targetElement.matches('.question-text')) {
                        // ▼▼▼ 修正箇所 ▼▼▼
                        textToSearch = originalTextContent
                            .replace(/^問題 \d+:\s*/, '')
                            .replace(/※?【[^】]*】にも出題/g, '')
                            .replace(/（[^）]*）/g, '')
                            .replace(/\([^)]*\)/g, (match) => {
                                // 括弧の中身が数字だけの場合は残す
                                const content = match.slice(1, -1);
                                return /^\d+$/.test(content) ? match : '';
                            })
                            .replace(/<[^>]*>/g, '')
                            .replace(/『[^』]*』/g, '')
                            .replace(/予想問題/g, '')
                            .trim();
                        
                        const choicesContainer = targetElement.closest('.question-content').querySelector('.choices-container');
                        let choiceTexts = '';
                        if (choicesContainer) {
                            const choiceButtons = choicesContainer.querySelectorAll('.choice-btn');
                            choiceTexts = Array.from(choiceButtons)
                                .map(btn => btn.textContent.trim())
                                .join('\n');
                        }
                        textToSearch = `${textToSearch}\n${choiceTexts}`;

                    } else if (targetElement.matches('.choice-btn')) {
                        textToSearch = originalTextContent.trim();
                    }
                    
                    if (!textToSearch) return;

                    const searchBtn = iframeDoc.createElement('button');
                    searchBtn.className = 'search-btn';
                    searchBtn.textContent = '🔍';
                    
                    searchBtn.onclick = () => {
                        if (!isMobile()) {
                            navigator.clipboard.writeText(textToSearch).catch(err => {
                                console.error('クリップボードへのコピーに失敗しました: ', err);
                            });
                        }

                        const searchQuery = encodeURIComponent(textToSearch);
                        const searchUrl = `https://www.google.com/search?q=${searchQuery}`;
                        
                        if (!isMobile()) {
                            const width = window.innerWidth;
                            const height = window.innerHeight;
                            const top = window.screenY;
                            const left = window.screenX + window.innerWidth;
                            const windowFeatures = `width=${width},height=${height},top=${top},left=${left},scrollbars=yes,resizable=yes`;
                            window.open(searchUrl, 'googleSearchWindow', windowFeatures);
                        } else {
                            window.open(searchUrl, '_blank');
                        }
                    };
                    
                    const wrapper = iframeDoc.createElement('div');
                    wrapper.className = 'search-button-wrapper';
                    
                    const parent = targetElement.parentNode;
                    if(parent) {
                        parent.replaceChild(wrapper, targetElement);
                        wrapper.appendChild(searchBtn);
                        wrapper.appendChild(targetElement);
                    }

                    if (targetElement.matches('.choice-btn')) {
                        targetElement.style.flexGrow = '1';
                        targetElement.style.margin = '0';
                    }
                     if (targetElement.matches('.question-text')) {
                        wrapper.style.marginBottom = '20px';
                        targetElement.style.marginBottom = '0';
                    }
                };
                
                const elementsToProcess = Array.from(iframeDoc.querySelectorAll('.question-text, .choice-btn'));
                elementsToProcess.forEach(createSearchButton);
                
                iframeDoc.body.classList.add('search-buttons-added');

            } catch (e) {
                console.warn("Could not add search buttons to iframe content: ", e.message);
            }
        }
        
        function setupIframeContent() {
            try {
                const iframeDoc = iframe.contentDocument;
                if (iframeDoc && iframeDoc.body && (iframeDoc.querySelector('.choice-btn') || iframeDoc.querySelector('#timer-display'))) {
                    injectBaseStyles(iframeDoc);
                    applyDarkModeToIframe(bodyElement.classList.contains('dark-mode'));
                    addSearchButtonsToIframe(); 
                    setAppHeight();
                } else {
                    setTimeout(setupIframeContent, 50);
                }
            } catch (e) {
                setTimeout(setupIframeContent, 50);
            }
        }

        iframe.addEventListener('load', () => {
            setupIframeContent();
        });
    </script>

</body>
</html>